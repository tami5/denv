#!/usr/bin/env janet

(import dotenv)
(import pkg)

(def args (dyn :args))

(def usage
  "Usage"
``` [action]

  Actions:
    help               - Print this usage information
    profile <name>     - Setup a profile
    push               - Push changes to remote repo
    pull               - Pull changes from remote repo
    clean <name>       - Remove profile or all profiles
    pkg-add <pkg>      - Add new pkg
    pkg-rm <pkg>       - Remove a pkg
    pkg-up <pkg>       - update a pkg
    version            - Print the current version
```)

(def action (get args 1))
(def options (drop 2 args))

(case action
  "profile" (dotenv/ensure ;options)
  "push"    (dotenv/push)
  "pull"    (dotenv/pull)
  "clean"   (dotenv/clean ;options)
  "pull"    (dotenv/pull)
  "pkg-add" (pkg/add ;options)
  "pkg-rm"  (pkg/remove ;options)
  "pkg-up"  (pkg/update ;options)
  "version" (print dotenv/version)
  (print "dotenv" usage))
